(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{3134:function(e,t,a){Promise.resolve().then(a.bind(a,238))},8192:function(e,t,a){"use strict";a.r(t),a.d(t,{UseContext:function(){return o}});var s=a(7437),c=a(2031),n=a(8153),l=a(2265);let o=(0,l.createContext)({bottomNavState:"",setBottomNavState:()=>{},isEventAddModal:!1,setIsEventAddModal:()=>{},user:null,setUser:()=>{},isUserMenu:!1,setIsUserMenu:()=>{},apiUserInfo:null,setApiUserInfo:()=>{},apiVacations:[],setApiVacations:()=>{},isModifyModal:!1,setIsModifyModal:()=>{},isFilter:!1,setIsFilter:()=>{},nowFilter:{A:!0,B:!0,C:!0,D:!0},setNowFilter:()=>{}});t.default=e=>{let{children:t}=e,[a,r]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1),[u,f]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),[m,g]=(0,l.useState)(null),[h,v]=(0,l.useState)([]),[j,b]=(0,l.useState)(!1),[y,C]=(0,l.useState)(!1),[N,w]=(0,l.useState)({A:!0,B:!0,C:!0,D:!0});return(0,l.useEffect)(()=>{let e=(0,n.Aj)(c.I,e=>{f(e)});return e},[u]),(0,s.jsx)(o.Provider,{value:{bottomNavState:a,setBottomNavState:r,isEventAddModal:i,setIsEventAddModal:d,user:u,setUser:f,isUserMenu:x,setIsUserMenu:p,apiUserInfo:m,setApiUserInfo:g,apiVacations:h,setApiVacations:v,isModifyModal:j,setIsModifyModal:b,isFilter:y,setIsFilter:C,nowFilter:N,setNowFilter:w},children:t})}},238:function(e,t,a){"use strict";a.r(t);var s=a(7437),c=a(8192),n=a(1173),l=a(4124),o=a(5742),r=a(2750),i=a(2265);a(356);var d=a(7096),u=a(4548),f=a.n(u);let HistoryCardComponent=e=>{let{apiVacations:t,user:a}=e,[c,n]=(0,i.useState)(-1),deleteConfirmHdlr=e=>{let t=confirm("문서를 삭제하시겠습니까?");t&&(0,d.Xd)(e.docId).then(()=>{window.location.reload()}).catch(e=>{console.log(e)})};return(0,s.jsx)("div",{className:"flex flex-col gap-3 my-5",children:null==t?void 0:t.map((e,t)=>(0,s.jsx)(i.Fragment,{children:(null==e?void 0:e.userId)===(null==a?void 0:a.uid)&&(0,s.jsxs)("div",{className:"rounded-md flex flex-col gap-2 border-black60 border-[1px] p-3 px-5 \n                       ".concat(c==t&&"shadow-lg","\n                        "),children:[(0,s.jsxs)("div",{className:"flex  text-black100 justify-around w-full",onClick:()=>{c==t?n(-1):n(t)},children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{children:f()(null==e?void 0:e.startDate).format("MM. DD.")}),(0,s.jsx)("div",{children:null==e?void 0:e.startTime})]}),(0,s.jsx)("div",{children:" | "}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{children:f()(null==e?void 0:e.endDate).format("MM. DD")}),(0,s.jsx)("div",{children:null==e?void 0:e.endTime})]})]}),c==t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:"border-black40"}),(0,s.jsx)("div",{className:"flex justify-around gap-5",children:(0,s.jsx)("button",{className:"bg-[#ff3d3d] w-full py-1 rounded-md text-[white] font-thin",onClick:()=>{deleteConfirmHdlr(e)},children:"삭제"})})]})]})},t))})};t.default=()=>{let e=(0,i.useContext)(c.UseContext),{setBottomNavState:t,apiVacations:a,setApiVacations:u,user:x}=e,[p,m]=(0,i.useState)(f()(new Date));return(0,i.useEffect)(()=>{t("history"),(0,d.u6)(null==p?void 0:p.year().toString(),u)},[p]),(0,s.jsx)("main",{className:"bg-bg w-full h-[100vh]",children:(0,s.jsxs)("section",{className:"bg-bg w-full h-[90vh] p-5 overflow-scroll",children:[(0,s.jsx)("h1",{className:"mb-5 font-black text-[24px]",children:"HISTORY"}),(0,s.jsx)(l._,{dateAdapter:r.y,adapterLocale:"ko",children:(0,s.jsx)(o.M,{className:"w-full",label:"연도별 검색",views:["year"],format:"YYYY년",value:p,onChange:e=>m(e)})}),(0,s.jsx)(HistoryCardComponent,{apiVacations:a,user:x}),(0,s.jsx)(n.default,{})]})})}},1173:function(e,t,a){"use strict";a.r(t);var s=a(7437),c=a(8192),n=a(4033),l=a(2265);t.default=()=>{let e=(0,l.useContext)(c.UseContext),{bottomNavState:t,setBottomNavState:a,user:o}=e,r=(0,n.useRouter)(),pageHdlr=e=>{r.push("/".concat(e)),a(e)};return(0,s.jsxs)("section",{className:"absolute bottom-0 left-0 h-[10%] z-[2] w-full px-10 flex justify-between border-t-black20 border-t-[0.5px] text-black40",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-1",onClick:()=>{pageHdlr("")},children:[(0,s.jsx)("img",{src:"".concat(""==t?"/asset/img/house.circle@10x.png":"/asset/img/house.circle@10x_grey.png"),className:"w-[24px] object-cover  "}),(0,s.jsx)("div",{className:"text-[12px] ".concat(""==t&&"text-black100"),children:"HOME"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-1",onClick:()=>{o?pageHdlr("history"):(alert("로그인 해 주세요 \uD83D\uDE4F"),r.push("/login"))},children:[(0,s.jsx)("img",{src:"".concat("history"==t?"/asset/img/list.bullet.circle@10x.png":"/asset/img/list.bullet.circle@10x_grey.png"),className:"w-[24px] object-cover"}),(0,s.jsx)("div",{className:"text-[12px] ".concat("history"==t&&"text-black100"),children:"HISTORY"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-1",onClick:()=>{o?pageHdlr("info"):(alert("로그인 해 주세요 \uD83D\uDE4F"),r.push("/login"))},children:[(0,s.jsx)("img",{src:"".concat("info"==t?"/asset/img/info.circle@10x.png":"/asset/img/info.circle@10x_grey.png"),className:"w-[24px] object-cover"}),(0,s.jsx)("div",{className:"text-[12px] ".concat("info"==t&&"text-black100"),children:"INFO"})]})]})}},7096:function(e,t,a){"use strict";a.d(t,{ED:function(){return createVacation},Xd:function(){return deleteVacation},nT:function(){return modifyVacation},pp:function(){return getVacationsCollection},u6:function(){return getVacationsCollectionByYear}});var s=a(2031),c=a(4086);let createVacation=async e=>{let t=(0,c.hJ)(s.db,"vacations");try{let a=(0,c.JU)(t);await (0,c.pl)(a,{docId:a.id,...e}).then(()=>{console.log("Create Success!")})}catch(e){console.log("FAILED!"),console.log(e)}},getVacationsCollection=async(e,t,a)=>{try{let n=(0,c.hJ)(s.db,"vacations"),l=(0,c.IO)(n,(0,c.ar)("startDate",">=","".concat(e,"-").concat(t)),(0,c.ar)("startDate","<","".concat(e,"-").concat((parseInt(t)+1).toString().padStart(2,"0")))),o=await (0,c.PL)(l),r=o.docs.map(e=>e.data());a(r),console.log("VACATION GET SUCCESS")}catch(e){console.error("휴가 정보 가져오기 중 오류가 발생했습니다:",e)}},getVacationsCollectionByYear=async(e,t)=>{try{let a=(0,c.hJ)(s.db,"vacations"),n=(0,c.IO)(a,(0,c.ar)("startDate",">=","".concat(e)),(0,c.ar)("startDate","<","".concat((parseInt(e)+1).toString().padStart(2,"0")))),l=await (0,c.PL)(n),o=l.docs.map(e=>e.data());t(o),console.log("VACATION GET SUCCESS")}catch(e){console.error("휴가 정보 가져오기 중 오류가 발생했습니다:",e)}},deleteVacation=async e=>{try{let t=(0,c.JU)(s.db,"vacations",e);await (0,c.oe)(t),console.log("delete success!")}catch(e){console.log(e),console.log("failed!")}},modifyVacation=async(e,t,a)=>{try{let e=(0,c.JU)(s.db,"vacations",a);await (0,c.r7)(e,t),console.log("update success!")}catch(e){console.log(e),console.log("failed!")}}},2031:function(e,t,a){"use strict";a.d(t,{I:function(){return i},db:function(){return r}});var s=a(994),c=a(9978),n=a(9584),l=a(8153);let o=(0,s.ZF)({apiKey:"AIzaSyCTwMc2ShiHt4o933L-q2NeCOeUWioe--Q",authDomain:"sdc-new-calendar-vacation.firebaseapp.com",projectId:"sdc-new-calendar-vacation",storageBucket:"sdc-new-calendar-vacation.appspot.com",messagingSenderId:"129344356801",appId:"1:129344356801:web:d6660765fa0c7b968d2f40",measurementId:"G-YDQN36SFN4"});(0,n.cF)(o);let r=(0,c.ad)(),i=(0,l.v0)(o)}},function(e){e.O(0,[358,50,376,71,271,971,472,744],function(){return e(e.s=3134)}),_N_E=e.O()}]);